<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script src="./RecordRTC.js"></script>
    <script src="./DetectRTC.js"></script>
    <script src="./RecordingManager.js"></script>

<style>
    .media-box video {
        width: 100%;
        vertical-align: top;
        object-fit: fill;
    }
    .media-box {
    background: black;
        width: 100%;
        vertical-align: top;
        object-fit: fill;
    }
    .top-item {
        hight: 50%;
        vertical-align: top;
        horiz-align: center;
    }
    .bottom-item {
        hight: 50%;
        vertical-align: bottom;
        horiz-align: center;
    }
    .coolbutton {
        background-color: #4CAF50; /* Green */
        border: none;
        color: black;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 8px;
        padding: 10px 24px;
    }

</style>

</head>
<body onload="bodyOnLoad()">
        <div id="recording-player"></div>
        <!--button onclick="StartMedia(eventId,'video-element',320)">StartVideo</--button>
        <button onclick="EndRecording(eventId)">End Recording</button-->
        <button class='coolbutton' onclick="increaseQuestionId();StartRecordingQuestion(eventId,questionId)">Start recording</button>
        <button class='coolbutton' onclick="StopRecordingQuestion(eventId,questionId)">Stop recording</button>
    </br>
    <video id="video-element"  width="320" height="240" ></video>
    </div>
    <hr style="border-top: 0;border-bottom: 1px solid rgb(189, 189, 189);margin: 4px -12px;margin-top: 8px;">

    <script>
        var ks='';

        function bodyOnLoad()
        {
            var eventId = Math.floor(Math.random() * 1000);
            var questionId = 1;

            function increaseQuestionId()
            {
                questionId++;
            }

            var getQueryString = function ( field, url ) {
                var href = url ? url : window.location.href;
                var reg = new RegExp( '[?&]' + field + '=([^&#]*)', 'i' );
                var string = reg.exec(href);
                return string ? string[1] : null;
            };
            ks = getQueryString('ks');
            console.log("KS is - " + ks);
            const width = getMobileWidth();
            StartMedia(eventId,'video-element',width);
        }

        function getOrientation(){
            if(window.orientation)
                return Math.abs(window.orientation) - 90 == 0 ? "landscape" : "portrait";
            return "landscape";
        };
        function getMobileWidth(){
            return getOrientation() == "landscape" ? screen.availHeight : screen.availWidth;
        };
        function getMobileHeight(){
            return getOrientation() == "landscape" ? screen.availWidth : screen.availHeight;
        };

    </script>

</body>
</html>
